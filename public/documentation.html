<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; }
        h1 { color: #333; }
        h2 { color: #555; }
        code { background: #f4f4f4; padding: 2px 4px; border-radius: 4px; }
        pre { background: #f4f4f4; padding: 10px; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>API Documentation</h1>
    <p>Base URL: <code>http://localhost:8080</code></p>

    <h2>Endpoints</h2>

    <h3>Get All Movies</h3>
    <p><strong>URL:</strong> <code>/movies</code></p>
    <p><strong>Method:</strong> GET</p>
    <p><strong>Description:</strong> Retrieves a list of all favorite movies.</p>
    <pre>
    <code>
    Response:
    Status: 200 OK
    [
        {"title":"Dune","year":"2022","genre":"Sci-fi","id":"1"},
        {"title":"Predator","year":"1988","genre":"Action", "id":"2"},
        {"title":"The Notebook","year":"2003","genre":"Romance", "id":"3"},
        {"title":"Moneyball","year":"2022","genre":"Sport History", "id":"4"},
        {"title":"The Terminator","year":"1986","genre":"Sci-fi", "id":"5"},
        {"title":"Mortal Engines","year":"2012","genre":"Fantasy", "id":"6"}
    ]
    </code>
    </pre>

    <h3>Get Movie by Title</h3>
    <p><strong>URL:</strong> <code>/movies/:title</code></p>
    <p><strong>Method:</strong> GET</p>
    <p><strong>Description:</strong> Retrieves details of a specific movie by its title.</p>
    <p><strong>URL Parameters:</strong> <code>title</code> (string) - The title of the movie to retrieve.</p>
    <pre>
    <code>
    Response (if movie is found):
    Status: 200 OK
    {
        "title": "Dune",
        "year": "2022",
        "genre": "Sci-fi",
        "id": "1"
    }

    Response (if movie is not found):
    Status: 404 Not Found
    Movie not found
    </code>
    </pre>

    <h3>Add a New Movie</h3>
    <p><strong>URL:</strong> <code>/movies</code></p>
    <p><strong>Method:</strong> POST</p>
    <p><strong>Description:</strong> Adds a new movie to the list of favorite movies.</p>
    <p><strong>Request Body:</strong></p>
    <pre>
    <code>
    {
        "title": "New Movie",
        "year": "2024",
        "genre": "Drama"
    }
    </code>
    </pre>
    <pre>
    <code>
    Response (if movie is successfully added):
    Status: 201 Created
    {
        "title": "New Movie",
        "year": "2024",
        "genre": "Drama",
        "id": "generated-uuid"
    }

    Response (if request body is missing or invalid):
    Status: 400 Bad Request
    No movie data in request body
    </code>
    </pre>

    <h3>Update Movie Genre</h3>
    <p><strong>URL:</strong> <code>/movies/:title/:genre</code></p>
    <p><strong>Method:</strong> PUT</p>
    <p><strong>Description:</strong> Updates the genre of a specific movie by its title.</p>
    <p><strong>URL Parameters:</strong> 
        <code>title</code> (string) - The title of the movie to update.<br>
        <code>genre</code> (string) - The new genre for the movie.
    </p>
    <pre>
    <code>
    Response (if movie is found and updated):
    Status: 201 Created
    Movie {title} genre updated to new genre

    Response (if movie is not found):
    Status: 404 Not Found
    Movie not found!
    </code>
    </pre>

    <h3>Delete Movie by ID</h3>
    <p><strong>URL:</strong> <code>/movies/:id</code></p>
    <p><strong>Method:</strong> DELETE</p>
    <p><strong>Description:</strong> Deletes a movie from the list by its ID.</p>
    <p><strong>URL Parameters:</strong> <code>id</code> (string) - The ID of the movie to delete.</p>
    <pre>
    <code>
    Response (if movie is found and deleted):
    Status: 201 Created
    Movie title was deleted successfully

    Response (if movie is not found):
    Status: 404 Not Found
    Movie not found!
    </code>
    </pre>

    <h3>Get Documentation</h3>
    <p><strong>URL:</strong> <code>/documentation</code></p>
    <p><strong>Method:</strong> GET</p>
    <p><strong>Description:</strong> Retrieves the API documentation.</p>
    <pre>
    <code>
    Response:
    Status: 200 OK
    Serves the documentation.html file.
    </code>
    </pre>

    <h3>Get Home Page</h3>
    <p><strong>URL:</strong> <code>/</code></p>
    <p><strong>Method:</strong> GET</p>
    <p><strong>Description:</strong> Retrieves the home page.</p>
    <pre>
    <code>
    Response:
    Status: 200 OK
    Serves the documentation.html file from the public directory.
    </code>
    </pre>

    <h3>Get All Users</h3>
<p><strong>URL:</strong> <code>/users</code></p>
<p><strong>Method:</strong> GET</p>
<p><strong>Description:</strong> Retrieves a list of all users.</p>
<pre>
<code>
Response:
Status: 200 OK
[
    {"id": "1", "Username": "user1", "Email": "user1@example.com", "Birthdate": "1990-01-01"},
    {"id": "2", "Username": "user2", "Email": "user2@example.com", "Birthdate": "1992-02-02"}
]
</code>
</pre>

<h3>Get User by ID</h3>
<p><strong>URL:</strong> <code>/users/:id</code></p>
<p><strong>Method:</strong> GET</p>
<p><strong>Description:</strong> Retrieves details of a specific user by their ID.</p>
<p><strong>URL Parameters:</strong> <code>id</code> (string) - The ID of the user to retrieve.</p>
<pre>
<code>
Response (if user is found):
Status: 200 OK
{
    "id": "1",
    "Username": "user1",
    "Email": "user1@example.com",
    "Birthdate": "1990-01-01"
}

Response (if user is not found):
Status: 400 Bad Request
User not found
</code>
</pre>

<h3>Add a New User</h3>
<p><strong>URL:</strong> <code>/users</code></p>
<p><strong>Method:</strong> POST</p>
<p><strong>Description:</strong> Adds a new user.</p>
<p><strong>Request Body:</strong></p>
<pre>
<code>
{
    "Username": "newuser",
    "Email": "newuser@example.com",
    "password": "password123",
    "Birthdate": "2000-01-01"
}
</code>
</pre>
<pre>
<code>
Response (if user is successfully added):
Status: 201 Created
User added

Response (if request body is missing or invalid):
Status: 400 Bad Request
User must have a username, email, password, and birthdate
</code>
</pre>

<h3>Update User</h3>
<p><strong>URL:</strong> <code>/users/:id</code></p>
<p><strong>Method:</strong> PUT</p>
<p><strong>Description:</strong> Updates any of the values on the user record.</p>
<p><strong>URL Parameters:</strong> <code>id</code> (string) - The ID of the user to update.</p>
<p><strong>Request Body:</strong> Fields to update (at least one is required).</p>
<pre>
<code>
{
    "Username": "updateduser",
    "Email": "updateduser@example.com",
    "password": "newpassword123",
    "Birthdate": "2000-01-01"
}
</code>
</pre>
<pre>
<code>
Response (if user is found and updated):
Status: 201 Created
User updated

Response (if user is not found):
Status: 400 Bad Request
Internal server error
</code>
</pre>

<h3>Add a Favourite Movie to a User</h3>
<p><strong>URL:</strong> <code>/users/:id/:movieId</code></p>
<p><strong>Method:</strong> PUT</p>
<p><strong>Description:</strong> Adds a favourite movie to a user's list of favourite movies.</p>
<p><strong>URL Parameters:</strong> 
    <code>id</code> (string) - The ID of the user.<br>
    <code>movieId</code> (string) - The ID of the movie to add.
</p>
<pre>
<code>
Response (if user is found and movie is added):
Status: 201 Created
Movie added to user's favourites

Response (if user is not found):
Status: 400 Bad Request
User not found

Response (if movie is not added):
Status: 400 Bad Request
Movie not added
</code>
</pre>

<h3>Delete a Favourite Movie from a User</h3>
<p><strong>URL:</strong> <code>/users/:id/:movieId</code></p>
<p><strong>Method:</strong> DELETE</p>
<p><strong>Description:</strong> Deletes a favourite movie from a user's list by its ID.</p>
<p><strong>URL Parameters:</strong> 
    <code>id</code> (string) - The ID of the user.<br>
    <code>movieId</code> (string) - The ID of the movie to delete.
</p>
<pre>
<code>
Response (if user is found and movie is deleted):
Status: 200 OK
Movie deleted successfully

Response (if user is not found):
Status: 400 Bad Request
User not found
</code>
</pre>


    <h2>Error Handling</h2>
    <p><strong>500 Internal Server Error:</strong> Catches any internal server errors and responds with a status code 500 and a message "Internal server error".</p>

    <h2>Middleware</h2>
    <p><strong>body-parser:</strong> Parses incoming request bodies in a middleware before your handlers, available under the <code>req.body</code> property.</p>
    <p><strong>morgan:</strong> HTTP request logger middleware for Node.js, configured to write logs to <code>log.txt</code>.</p>

    <h2>Logging</h2>
    <p>Logs all HTTP requests to <code>log.txt</code> using morgan middleware.</p>

    <h2>Static Files</h2>
    <p>Serves static files from the <code>public</code> directory.</p>

</body>
</html>
